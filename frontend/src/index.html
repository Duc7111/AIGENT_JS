<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Aileron</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div id="main">
      <div id="header">
        <ul id="nav">
          <li>
            <a href="#">
              <img src="./image/logo.svg" class="logo" />
            </a>
          </li>

          <li>
            <a href="#" class="logoName"> Aileron </a>
          </li>

          <li>
            <button class="button_menu_icon">
              <img src="./image/menu_mainpage.svg" class="menu_icon" />
            </button>
          </li>
        </ul>
        <div class="setting_icon">
          <img src="./image/setting_icon.svg" />
        </div>
      </div>
    </div>

    <div id="content">
      <div class="menu-bar close">
        <ul class="bar">
          <li>
            <a href="#chatflow-view">
              <img src="./image/chatflows_icon.svg" class="icon" />
              <span class="text nav-text">Chatflows</span>
            </a>
          </li>
          <li>
            <a href="#library-view">
              <img src="./image/market_icon.svg " class="icon" />
              <span class="text nav-text">Libraries</span>
            </a>
          </li>
          <li>
            <a href="#assistant-view">
              <img src="./image/assis_icon.svg" class="icon" />
              <span class="text nav-text">Assistants</span>
            </a>
          </li>
          <li>
            <a href="#apikey-view">
              <img src="./image/key_fill.svg" class="icon" />
              <span class="text nav-text">API Keys</span>
            </a>
          </li>
        </ul>
      </div>

      <div id="sub-content">
        <div id="chatflow-view" class="sub-view">
          <div class="header-chatflow">
            <div class="text chatflow-name">List</div>
            <div class="base">
              <input type="text" />
              <div class="search-box"></div>
              <div class="cross">X</div>
            </div>
            <button class="add-directory" id="addNewBtn">
              <img src="./image/add_icon.svg" class="icon" />
              <span class="text">Add New</span>
            </button>
          </div>

          <div id="list-directory"></div>
        </div>

        <div id="library-view" class="sub-view">
          <h2>Market View</h2>
        </div>

        <div id="assistant-view" class="sub-view">
          <h2>Assistants View</h2>
        </div>

        <div id="apikey-view" class="sub-view">
          <h2>API View</h2>
        </div>
      </div>
    </div>

    <div id="footer"></div>
    <script>
      const body = document.querySelector("body"),
        menu_toggle = body.querySelector(".menu_icon"),
        menubar = body.querySelector(".menu-bar.close");

      menu_toggle.addEventListener("click", () => {
        menubar.classList.toggle("close");
        console.log("clicked");
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const chatflowsBtn = document.getElementById("addNewBtn");
        chatflowsBtn.addEventListener("click", (e) => {
          e.preventDefault();
          window.electron.openPipeline();
        });
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Hide all sub-views except for chatflow-view
        const subContents = document.querySelectorAll(
          "#sub-content > .sub-view"
        );
        subContents.forEach((subContent) => {
          if (subContent.id !== "chatflow-view") {
            subContent.style.display = "none";
          }
        });
      });

      var navigation = document.querySelector(".bar");
      var listItems = navigation.children;
      Array.from(listItems).forEach((item) => {
        const contentLinks = item.querySelector("a");

        contentLinks.addEventListener("click", (event) => {
          event.preventDefault(); // Prevent default behavior of link click
          const targetId = contentLinks.getAttribute("href"); // Get the target id from the href attribute
          const subContents = document.querySelectorAll(
            "#sub-content > .sub-view"
          );

          subContents.forEach((subContent) => {
            subContent.style.display = "none"; // Hide all sub-content divs
          });
          const targetSubContent = document.getElementById(
            targetId.substring(1)
          ); // Remove '#' from targetId

          if (targetSubContent) {
            targetSubContent.style.display = "block"; // Show the targeted sub-content div
          }
        });
      });
    </script>
  </body>
</html>
